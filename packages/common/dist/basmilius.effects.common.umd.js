!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).BMEffectsCommon={})}(this,(function(t){"use strict";t.LimitedFrameRateCanvas=class{constructor(t,e){this._current=0,this._delta=0,this._frame=0,this._now=0,this._then=0,this._ticks=0,this._isStopped=!1,this._height=540,this._width=960,this._canvas=t,this._context=t.getContext("2d",{colorSpace:"display-p3"}),this._frameRate=e,this._target=1e3/e,this._boundOnVisibilityChange=this.onVisibilityChange.bind(this),this._boundOnResize=this.onResize.bind(this),document.addEventListener("visibilitychange",this._boundOnVisibilityChange,{passive:!0}),window.addEventListener("resize",this._boundOnResize,{passive:!0})}get canvas(){return this._canvas}get context(){return this._context}get delta(){return this._delta}get deltaFactor(){return 0===this._then?1:this._target/this._delta}get frameRate(){return this._frameRate}get isSmall(){return innerWidth<991}get ticks(){return this._ticks}get height(){return this._height}get width(){return this._width}loop(){this._isStopped||(this._current=Date.now(),this._frame=requestAnimationFrame(this.loop.bind(this)),this._then>0&&this._current-this._then+1<this._target||(this._now=this._current,this._delta=this._now-this._then,++this._ticks,this.tick(),this.draw(),this._then=this._now))}start(){this.onResize(),this._isStopped=!1,this._frame=requestAnimationFrame(this.loop.bind(this))}stop(){this._isStopped=!0,cancelAnimationFrame(this._frame)}draw(){throw new Error("LimitedFrameRateCanvas::draw() should be overwritten.")}tick(){throw new Error("LimitedFrameRateCanvas::tick() should be overwritten.")}destroy(){document.removeEventListener("visibilitychange",this._boundOnVisibilityChange),window.removeEventListener("resize",this._boundOnResize)}onResize(){const{width:t,height:e}=this._canvas.getBoundingClientRect();this._height=e,this._width=t}onVisibilityChange(){cancelAnimationFrame(this._frame),"visible"===document.visibilityState?(this._then=0,this.start()):(this._then=0,this.stop())}},t.distance=function(t,e){let i=t.x-e.x,n=t.y-e.y;return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))},t.mulberry32=function t(e){const i=new Uint32Array(1);return i[0]=e,{fork:function(){return t(this.next()*Math.pow(2,32))},next:function(){const t=i[0]=i[0]+1831565813|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296},nextBetween:function(t,e){return this.next()*(e-t)+t}}},Object.defineProperty(t,"__esModule",{value:!0})}));//# sourceMappingURL=basmilius.effects.common.umd.js.map
